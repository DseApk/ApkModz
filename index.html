<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‍</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&family=Montserrat:wght@600;700&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Poppins', sans-serif;
        }

        body {
            background-color: #ffffff;
            color: #333;
            line-height: 1.6;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }

        .container {
            width: 100%;
            max-width: 800px;
            margin: 0 auto;
            padding: 30px;
            text-align: center;
        }

        .header {
            margin-bottom: 40px;
        }

        .header h1 {
            font-family: 'Montserrat', sans-serif;
            font-size: 2.8rem;
            font-weight: 700;
            color: #2d3436;
            letter-spacing: -0.5px;
            margin-bottom: 10px;
        }

        .header p {
            font-size: 1.1rem;
            color: #636e72;
            max-width: 600px;
            margin: 0 auto;
        }

        .tasks-container {
            display: flex;
            flex-direction: column;
            gap: 30px;
            margin-bottom: 50px;
        }

        .task {
            background-color: #f8f9fa;
            border-radius: 16px;
            padding: 30px;
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.05);
            border: 1px solid #e9ecef;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }

        .task:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.08);
        }

        .task-header {
            margin-bottom: 25px;
        }

        .task-title {
            font-family: 'Montserrat', sans-serif;
            font-size: 1.8rem;
            font-weight: 700;
            color: #0984e3;
            margin-bottom: 8px;
        }

        .task-instruction {
            color: #636e72;
            font-size: 1rem;
        }

        .task-button {
            padding: 16px 40px;
            font-size: 1.1rem;
            font-weight: 600;
            border: none;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
            letter-spacing: 0.5px;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }

        .task-button i {
            font-size: 1.2rem;
        }

        .task-button:disabled {
            opacity: 0.6;
            cursor: not-allowed;
        }

        .get-link-container {
            margin-top: 20px;
        }

        .get-link-button {
            padding: 18px 60px;
            font-size: 1.3rem;
            font-weight: 700;
            background: linear-gradient(135deg, #00b894 0%, #00a085 100%);
            color: white;
            border: none;
            border-radius: 14px;
            cursor: pointer;
            transition: all 0.3s ease;
            letter-spacing: 0.8px;
            box-shadow: 0 6px 15px rgba(0, 184, 148, 0.3);
        }

        .get-link-button:disabled {
            background: #b2bec3;
            cursor: not-allowed;
            box-shadow: none;
        }

        .get-link-button:hover:not(:disabled) {
            transform: translateY(-3px);
            box-shadow: 0 10px 20px rgba(0, 184, 148, 0.4);
        }

        .task-completed {
            color: #00b894;
            font-weight: 600;
            margin-top: 15px;
            font-size: 1rem;
            display: none;
        }

        .task-completed.show {
            display: block;
        }

        .task-completed i {
            margin-right: 8px;
        }

        /* Admin Panel Styles */
        .admin-panel-toggle {
            position: fixed;
            bottom: 20px;
            right: 20px;
            width: 50px;
            height: 50px;
            background-color: #2d3436;
            color: white;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            cursor: pointer;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
            z-index: 1000;
            font-size: 1.3rem;
        }

        .admin-panel {
            position: fixed;
            bottom: 80px;
            right: 20px;
            width: 350px;
            background-color: white;
            border-radius: 16px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.15);
            padding: 0;
            z-index: 1000;
            display: none;
            border: 1px solid #dfe6e9;
            overflow: hidden;
        }

        .admin-panel.active {
            display: block;
        }

        .admin-header {
            background-color: #2d3436;
            color: white;
            padding: 20px;
            font-weight: 600;
            font-size: 1.2rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .admin-close {
            cursor: pointer;
            font-size: 1.4rem;
        }

        .admin-content {
            padding: 20px;
            max-height: 500px;
            overflow-y: auto;
        }

        .admin-section {
            margin-bottom: 25px;
            padding-bottom: 20px;
            border-bottom: 1px solid #eee;
        }

        .admin-section-title {
            font-weight: 600;
            margin-bottom: 15px;
            color: #2d3436;
            font-size: 1.1rem;
        }

        .form-group {
            margin-bottom: 15px;
        }

        .form-group label {
            display: block;
            margin-bottom: 6px;
            font-size: 0.9rem;
            color: #636e72;
        }

        .form-control {
            width: 100%;
            padding: 10px 12px;
            border: 1px solid #ddd;
            border-radius: 8px;
            font-size: 0.95rem;
        }

        .color-inputs {
            display: flex;
            gap: 10px;
        }

        .color-input {
            flex: 1;
        }

        .btn {
            padding: 10px 20px;
            border: none;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .btn-primary {
            background-color: #0984e3;
            color: white;
        }

        .btn-primary:hover {
            background-color: #0770c4;
        }

        .btn-secondary {
            background-color: #dfe6e9;
            color: #2d3436;
        }

        .btn-secondary:hover {
            background-color: #b2bec3;
        }

        .btn-danger {
            background-color: #d63031;
            color: white;
        }

        .btn-danger:hover {
            background-color: #c0392b;
        }

        .button-actions {
            display: flex;
            gap: 10px;
        }

        .button-item {
            background-color: #f8f9fa;
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 15px;
            border-left: 4px solid #0984e3;
        }

        .login-form {
            text-align: center;
        }

        .login-form input {
            margin-bottom: 15px;
        }

        .message {
            padding: 10px;
            border-radius: 8px;
            margin-bottom: 15px;
            font-size: 0.9rem;
            display: none;
        }

        .message.success {
            background-color: #d4edda;
            color: #155724;
            display: block;
        }

        .message.error {
            background-color: #f8d7da;
            color: #721c24;
            display: block;
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .container {
                padding: 20px;
            }

            .header h1 {
                font-size: 2.2rem;
            }

            .task {
                padding: 20px;
            }

            .admin-panel {
                width: calc(100% - 40px);
                right: 20px;
                bottom: 80px;
            }
        }

        @media (max-width: 480px) {
            .header h1 {
                font-size: 1.8rem;
            }

            .task-button {
                padding: 14px 30px;
                font-size: 1rem;
            }

            .get-link-button {
                padding: 16px 40px;
                font-size: 1.1rem;
            }

            .admin-panel {
                width: calc(100% - 40px);
            }
        }
    </style>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>‍</h1>
            <p>‍</p>
        </div>

        <div class="tasks-container" id="tasksContainer">
            <!-- Task buttons will be dynamically generated here -->
        </div>

        <div class="get-link-container">
            <button class="get-link-button" id="getLinkButton" disabled>
                <i class="fas fa-link"></i> GET LINK
            </button>
        </div>
    </div>

    <!-- Admin Panel Toggle -->
    <div class="admin-panel-toggle" id="adminToggle">
        <i class="fas fa-cog"></i>
    </div>

    <!-- Admin Panel -->
    <div class="admin-panel" id="adminPanel">
        <div class="admin-header">
            <span>Admin Panel</span>
            <span class="admin-close" id="adminClose">&times;</span>
        </div>
        
        <div class="admin-content" id="adminContent">
            <!-- Login form initially shown -->
            <div class="admin-section login-form" id="loginForm">
                <div class="admin-section-title">Admin Login</div>
                <div class="form-group">
                    <input type="password" class="form-control" id="adminPassword" placeholder="Enter password">
                </div>
                <button class="btn btn-primary" id="loginButton">Login</button>
                <div class="message" id="loginMessage"></div>
            </div>

            <!-- Admin controls (shown after login) -->
            <div id="adminControls" style="display: none;">
                <div class="message" id="adminMessage"></div>
                
                <div class="admin-section">
                    <div class="admin-section-title">Manage Task Buttons</div>
                    <div id="buttonList">
                        <!-- Button items will be added here dynamically -->
                    </div>
                    <button class="btn btn-secondary" id="addButton">
                        <i class="fas fa-plus"></i> Add New Button
                    </button>
                </div>

                <div class="admin-section">
                    <div class="admin-section-title">Final Link Settings</div>
                    <div class="form-group">
                        <label for="finalLink">GET LINK URL</label>
                        <input type="text" class="form-control" id="finalLink" placeholder="https://example.com/final-link">
                    </div>
                </div>

                <div class="admin-section">
                    <div class="admin-section-title">Admin Actions</div>
                    <div class="button-actions">
                        <button class="btn btn-primary" id="saveSettings">Save Settings</button>
                        <button class="btn btn-secondary" id="resetProgress">Reset User Progress</button>
                        <button class="btn btn-danger" id="logoutButton">Logout</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Default configuration
        let config = {
            buttons: [
                {
                    id: 1,
                    name: "JOIN ON TELEGRAM",
                    link: "https://t.me/example1",
                    color: "#0984e3",
                    textColor: "#ffffff",
                    enabled: true
                },
                {
                    id: 2,
                    name: "JOIN ON TELEGRAM",
                    link: "https://t.me/example2",
                    color: "#0984e3",
                    textColor: "#ffffff",
                    enabled: false
                }
            ],
            finalLink: "https://example.com/final-access",
            userProgress: [false, false]
        };

        // DOM Elements
        const tasksContainer = document.getElementById('tasksContainer');
        const getLinkButton = document.getElementById('getLinkButton');
        const adminToggle = document.getElementById('adminToggle');
        const adminPanel = document.getElementById('adminPanel');
        const adminClose = document.getElementById('adminClose');
        const adminContent = document.getElementById('adminContent');
        const loginForm = document.getElementById('loginForm');
        const adminControls = document.getElementById('adminControls');
        const adminPassword = document.getElementById('adminPassword');
        const loginButton = document.getElementById('loginButton');
        const loginMessage = document.getElementById('loginMessage');
        const adminMessage = document.getElementById('adminMessage');
        const buttonList = document.getElementById('buttonList');
        const addButton = document.getElementById('addButton');
        const finalLink = document.getElementById('finalLink');
        const saveSettings = document.getElementById('saveSettings');
        const resetProgress = document.getElementById('resetProgress');
        const logoutButton = document.getElementById('logoutButton');

        // Check if config exists in localStorage
        if (localStorage.getItem('taskUnlockConfig')) {
            config = JSON.parse(localStorage.getItem('taskUnlockConfig'));
        } else {
            // Save default config to localStorage
            localStorage.setItem('taskUnlockConfig', JSON.stringify(config));
        }

        // Load user progress from localStorage
        if (localStorage.getItem('taskUnlockProgress')) {
            config.userProgress = JSON.parse(localStorage.getItem('taskUnlockProgress'));
        }

        // Initialize the task buttons
        function initializeTasks() {
            tasksContainer.innerHTML = '';
            
            config.buttons.forEach((button, index) => {
                const taskElement = document.createElement('div');
                taskElement.className = 'task';
                taskElement.innerHTML = `
                    <div class="task-header">
                        <div class="task-title">TASK ${index + 1}</div>
                        <div class="task-instruction">Click the button below and join the channel</div>
                    </div>
                    <button class="task-button" 
                            data-id="${button.id}"
                            style="background-color: ${button.color}; color: ${button.textColor};"
                            ${button.enabled ? '' : 'disabled'}>
                        <i class="fab fa-telegram"></i> ${button.name}
                    </button>
                    <div class="task-completed ${config.userProgress[index] ? 'show' : ''}">
                        <i class="fas fa-check-circle"></i> Task completed
                    </div>
                `;
                tasksContainer.appendChild(taskElement);
            });
            
            // Add event listeners to task buttons
            document.querySelectorAll('.task-button').forEach(button => {
                button.addEventListener('click', handleTaskButtonClick);
            });
            
            // Update GET LINK button state
            updateGetLinkButton();
        }

        // Handle task button click
        function handleTaskButtonClick(event) {
            const button = event.currentTarget;
            const buttonId = parseInt(button.getAttribute('data-id'));
            const buttonIndex = config.buttons.findIndex(b => b.id === buttonId);
            
            // Open the link in a new tab
            const buttonConfig = config.buttons[buttonIndex];
            window.open(buttonConfig.link, '_blank');
            
            // Mark task as completed
            config.userProgress[buttonIndex] = true;
            
            // Save progress to localStorage
            localStorage.setItem('taskUnlockProgress', JSON.stringify(config.userProgress));
            
            // Show completed message
            const taskElement = button.closest('.task');
            const completedMessage = taskElement.querySelector('.task-completed');
            completedMessage.classList.add('show');
            
            // Disable the clicked button
            button.disabled = true;
            
            // Enable the next button if exists
            if (buttonIndex + 1 < config.buttons.length) {
                config.buttons[buttonIndex + 1].enabled = true;
                
                // Update the button in the UI
                const nextButton = document.querySelector(`.task-button[data-id="${config.buttons[buttonIndex + 1].id}"]`);
                if (nextButton) {
                    nextButton.disabled = false;
                }
            }
            
            // Update GET LINK button state
            updateGetLinkButton();
            
            // Save updated config
            localStorage.setItem('taskUnlockConfig', JSON.stringify(config));
        }

        // Update GET LINK button state
        function updateGetLinkButton() {
            const allCompleted = config.userProgress.every(completed => completed === true);
            
            if (allCompleted && config.buttons.length > 0) {
                getLinkButton.disabled = false;
            } else {
                getLinkButton.disabled = true;
            }
        }

        // Handle GET LINK button click
        getLinkButton.addEventListener('click', function() {
            if (!this.disabled) {
                window.open(config.finalLink, '_blank');
            }
        });

        // Admin Panel Functions
        function showAdminMessage(text, type) {
            adminMessage.textContent = text;
            adminMessage.className = `message ${type}`;
            
            setTimeout(() => {
                adminMessage.className = 'message';
            }, 3000);
        }

        // Toggle admin panel
        adminToggle.addEventListener('click', () => {
            adminPanel.classList.toggle('active');
        });

        // Close admin panel
        adminClose.addEventListener('click', () => {
            adminPanel.classList.remove('active');
        });

        // Admin login
        loginButton.addEventListener('click', () => {
            const password = adminPassword.value;
            
            if (password === '8121') {
                loginForm.style.display = 'none';
                adminControls.style.display = 'block';
                loadAdminControls();
                adminPassword.value = '';
                loginMessage.className = 'message';
            } else {
                loginMessage.textContent = 'Incorrect password. Please try again.';
                loginMessage.className = 'message error';
            }
        });

        // Load admin controls
        function loadAdminControls() {
            // Load button list
            buttonList.innerHTML = '';
            
            config.buttons.forEach((button, index) => {
                const buttonItem = document.createElement('div');
                buttonItem.className = 'button-item';
                buttonItem.innerHTML = `
                    <div class="form-group">
                        <label>Button Name</label>
                        <input type="text" class="form-control button-name" value="${button.name}" data-index="${index}">
                    </div>
                    <div class="form-group">
                        <label>Button Link</label>
                        <input type="text" class="form-control button-link" value="${button.link}" data-index="${index}">
                    </div>
                    <div class="form-group color-inputs">
                        <div class="color-input">
                            <label>Button Color</label>
                            <input type="color" class="form-control button-color" value="${button.color}" data-index="${index}">
                        </div>
                        <div class="color-input">
                            <label>Text Color</label>
                            <input type="color" class="form-control button-text-color" value="${button.textColor}" data-index="${index}">
                        </div>
                    </div>
                    <button class="btn btn-danger remove-button" data-index="${index}">
                        <i class="fas fa-trash"></i> Remove Button
                    </button>
                `;
                buttonList.appendChild(buttonItem);
            });
            
            // Load final link
            finalLink.value = config.finalLink;
            
            // Add event listeners to remove buttons
            document.querySelectorAll('.remove-button').forEach(button => {
                button.addEventListener('click', function() {
                    const index = parseInt(this.getAttribute('data-index'));
                    if (config.buttons.length > 2) {
                        config.buttons.splice(index, 1);
                        config.userProgress.splice(index, 1);
                        loadAdminControls();
                    } else {
                        showAdminMessage('You must have at least 2 buttons', 'error');
                    }
                });
            });
        }

        // Add new button
        addButton.addEventListener('click', () => {
            const newId = config.buttons.length > 0 ? Math.max(...config.buttons.map(b => b.id)) + 1 : 1;
            
            config.buttons.push({
                id: newId,
                name: "NEW TASK",
                link: "https://example.com",
                color: "#0984e3",
                textColor: "#ffffff",
                enabled: config.buttons.length === 0 // First button is enabled by default
            });
            
            config.userProgress.push(false);
            loadAdminControls();
        });

        // Save settings
        saveSettings.addEventListener('click', () => {
            // Update button configurations
            document.querySelectorAll('.button-name').forEach(input => {
                const index = parseInt(input.getAttribute('data-index'));
                config.buttons[index].name = input.value;
            });
            
            document.querySelectorAll('.button-link').forEach(input => {
                const index = parseInt(input.getAttribute('data-index'));
                config.buttons[index].link = input.value;
            });
            
            document.querySelectorAll('.button-color').forEach(input => {
                const index = parseInt(input.getAttribute('data-index'));
                config.buttons[index].color = input.value;
            });
            
            document.querySelectorAll('.button-text-color').forEach(input => {
                const index = parseInt(input.getAttribute('data-index'));
                config.buttons[index].textColor = input.value;
            });
            
            // Update final link
            config.finalLink = finalLink.value;
            
            // Save to localStorage
            localStorage.setItem('taskUnlockConfig', JSON.stringify(config));
            
            // Reinitialize tasks
            initializeTasks();
            
            // Show success message
            showAdminMessage('Settings saved successfully!', 'success');
        });

        // Reset user progress
        resetProgress.addEventListener('click', () => {
            if (confirm('Are you sure you want to reset all user progress? This will clear completion status for all users.')) {
                config.userProgress = new Array(config.buttons.length).fill(false);
                config.buttons.forEach((button, index) => {
                    button.enabled = index === 0; // Only first button enabled
                });
                
                localStorage.setItem('taskUnlockProgress', JSON.stringify(config.userProgress));
                localStorage.setItem('taskUnlockConfig', JSON.stringify(config));
                
                initializeTasks();
                showAdminMessage('User progress has been reset', 'success');
            }
        });

        // Logout admin
        logoutButton.addEventListener('click', () => {
            adminControls.style.display = 'none';
            loginForm.style.display = 'block';
            adminPanel.classList.remove('active');
        });

        // Enter key for admin login
        adminPassword.addEventListener('keypress', (e) => {
            if (e.key === 'Enter') {
                loginButton.click();
            }
        });

        // Close admin panel when clicking outside
        document.addEventListener('click', (e) => {
            if (!adminPanel.contains(e.target) && !adminToggle.contains(e.target) && adminPanel.classList.contains('active')) {
                adminPanel.classList.remove('active');
            }
        });

        // Initialize the page
        initializeTasks();
    </script>
</body>
</html>